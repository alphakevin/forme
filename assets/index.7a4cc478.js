var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,i=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&l(e,r,t[r]);return e},s=(e,n)=>t(e,r(n)),c=(e,t,r)=>(l(e,"symbol"!=typeof t?t+"":t,r),r);const d={};import{r as m,t as p,D as u,c as h,m as g,a as y,g as b,b as E,o as f,M as _,R as v,F as N,I as x,U as S,B as k,d as I,P as w,e as C,f as B,h as T,i as D,j as O,C as P,k as j,l as R,T as q,n as A,p as L,q as z,s as M,L as H,u as F,v as J,w as U}from"./vendor.e88720c3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var V="assets/LongAnswer.d92d19b6.svg",K="assets/Section.5935487e.svg",Y="assets/ShortAnswer.7f895f28.svg",$="assets/Term.aa61a3b9.svg",Q=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",LongAnswer:V,Section:K,ShortAnswer:Y,SingleCheckbox:"assets/SingleCheckbox.9c06ca68.svg",Term:$});const W={Section:{name:"Section",dragable:!0,icon:K,schema:{type:"string","x-component":"Section","x-component-props":{title:"Section"}}},Term:{name:"Term",dragable:!0,icon:$,schema:{type:"string","x-component":"Term","x-component-props":{title:"Term"}}},ShortAnswer:{name:"Short answer",dragable:!0,icon:Y,schema:{type:"string","x-component":"ShortAnswer","x-component-props":{title:"Short answer"}}},LongAnswer:{name:"Long answer",dragable:!0,icon:V,schema:{type:"string","x-component":"LongAnswer","x-component-props":{title:"Long answer"}}}};m.exports.createContext(null).Provider;const G=e=>{let t="";if("string"==typeof e)if(e.startsWith("http")){const{pathname:r}=new URL(e);t=r.split("/src/").pop().split(".")[0].replace(/\//g,":")}else t=e;const r=u(t);return r.enabled=!0,r.log=console.log.bind(console),(e,...t)=>r.apply(r,[e,...t].map(p))},X=e=>JSON.stringify(e),Z=e=>JSON.parse(e),ee=h(Array(52).fill(0).map(((e,t)=>String.fromCharCode(t<26?t+65:t+71))).join(""),6),te=(e="")=>e+ee(),re=G(null==d?void 0:d.url),ne=class{constructor(e,t){var r;if(c(this,"id"),c(this,"parent"),c(this,"type"),c(this,"title"),c(this,"component"),c(this,"props",{}),c(this,"children",[]),e instanceof ne)return e;this.id=null!=(r=e.id)?r:te(),this.parent=t,this.type=e.type,this.title=e.title,this.component=e.component,this.props=e.props,this.children=e.children,ne.map.set(this.id,this),g(this)}static fromSchema(e,t,r){const{type:n,title:a,"x-component":o,"x-component-props":l,properties:i}=e,s=new ne({id:t,type:n,title:a,component:o,props:l},r);return s.children=i?Object.keys(i).map((e=>ne.fromSchema(i[e],e,s))):[],s}static findById(e){return ne.map.get(e)}get index(){return this.parent?this.parent.children.indexOf(this):0}get previous(){if(this.parent)return this.parent.children[this.index-1]}get next(){if(this.parent)return this.parent.children[this.index+1]}get siblings(){return this.parent?this.parent.children.filter((e=>e!==this)):[]}findById(e){return this.children.find((t=>t.id===e))}clone(e){const t=new ne({id:te(),type:this.type,title:this.title,component:this.component,props:y(this.props)},e);return t.children=this.children.map((e=>e.clone(t))),t}duplicate(){re("duplicate",this);const e=this.clone();return this.parent.insert(this.index+1,e),e}remove(){return this.parent?(this.parent.children.splice(this.index,1),this.parent=void 0,this):this}adopt(...e){return e.filter((e=>e.parent!==this)).map((e=>(e.remove(),e.parent=this,e)))}prepend(...e){const t=this.adopt(...e);return this.children.unshift(...t),t}append(...e){const t=this.adopt(...e);return this.children.push(...t),t}insert(e,...t){re("insert",this,e,...t);const r=this.adopt(...t);return this.children.splice(e,0,...r),r}toSchema(){return{type:this.type,title:this.title,"x-component":this.component,"x-component-props":y(this.props),properties:this.children.reduce(((e,t)=>s(i({},e),{[t.id]:t.toSchema()})),{})}}};let ae=ne;c(ae,"map",new Map),G(null==d?void 0:d.url);const oe=class{constructor(e={}){c(this,"treeNode"),this.schema=e,this.treeNode=ae.fromSchema(e,"/"),g(this)}get config(){return oe.config}get icons(){return oe.icons}getIcon(e){return this.icons[e]}getSchema(e=[]){const t=e.flatMap((e=>["properties",e]));return b(this.schema,t)}getParentSchema(e=[]){return this.getSchema(e.slice(0,-1))}getComponentConfig(e){return this.config[e]}getComponentSchemaTemplate(e){return E(this.getComponentConfig(e).schema)}insertNewComponent(e,t,r){const n=this.getComponentSchemaTemplate(t),a=ae.fromSchema(n);r.insert(e,a)}};let le=oe;var ie;c(le,"config",W),c(le,"icons",Q),(ie||(ie={})).Component="Component";m.exports.createContext(null).Provider;var se={containerBuilder:"_containerBuilder_1qkq1_1",header:"_header_1qkq1_5",logo:"_logo_1qkq1_10",title:"_title_1qkq1_15",body:"_body_1qkq1_18",label:"_label_1qkq1_21"};const ce=G(null==d?void 0:d.url),de=f((e=>{ce("render %o",e);const{className:t,children:r,icon:n,treeNode:a,onRename:o,onDuplicate:l,onDelete:s}=e,c=a.props,[d,p]=_.useModal(),u=m.exports.useCallback((()=>{let e=i({},c);d.confirm({title:"Edit help content",icon:!1,closable:!0,maskClosable:!0,okText:"Save",cancelButtonProps:{style:{display:"none"}},content:v.createElement(N,{layout:"vertical"},v.createElement(N.Item,{label:"Help text"},v.createElement(x.TextArea,{ref:e=>null==e?void 0:e.focus(),rows:4,defaultValue:e.help,onBlur:t=>e.help=t.target.value})),v.createElement(N.Item,null,v.createElement(S,null,v.createElement(k,{icon:v.createElement(I,null)},"Upload image")))),onOk:t=>{c.help=e.help,t()}})}),[d,c]);return v.createElement(w,{draggableId:X({type:"Component",id:a.id,action:"drag"}),index:a.index},(e=>v.createElement("div",i({ref:e.innerRef,className:C(se.containerBuilder,t)},e.draggableProps),v.createElement("div",i({className:se.header},e.dragHandleProps),v.createElement("img",{className:se.logo,src:n}),v.createElement("div",{className:se.title},c.title),v.createElement(k,{type:"text",icon:v.createElement(B,null),onClick:u},"Edit help content"),v.createElement(T,{placement:"bottomRight",trigger:["click"],overlay:v.createElement(D,null,v.createElement(D.Item,{key:"title",disabled:!0},"COMPONENT MENU"),v.createElement(D.Item,{key:"duplicate",onClick:l},"Duplicate"),v.createElement(D.Item,{key:"delete",danger:!0,onClick:s},"Delete"))},v.createElement(k,{size:"small",icon:v.createElement(O,null)}))),v.createElement("div",{className:se.body},v.createElement(N,{layout:"vertical"},v.createElement(N.Item,{label:"Question",required:!0},v.createElement(x,{defaultValue:c.question,onBlur:e=>{c.question=e.target.value}})),v.createElement(N.Item,{label:"Description"},v.createElement(x,{defaultValue:c.description,onBlur:e=>{c.description=e.target.value}}))),v.createElement("div",{className:se.response},v.createElement("div",{className:se.label},"Response settings"),r)),p)))}));var me={};const pe=G(d.url),ue=f((e=>{pe("render %o",e);const{className:t,treeNode:r,onRename:n,onDuplicate:a,onDelete:o}=e,l=r.props;return v.createElement(de,{icon:V,treeNode:r,onRename:n,onDuplicate:a,onDelete:o},v.createElement("div",{className:C(me.shortAnswerBuilder,t)},v.createElement(N,null,v.createElement(N.Item,{label:"Text field label",required:!0},v.createElement(x,{defaultValue:l.label,onBlur:e=>l.label=e.target.value})))))}));var he="_sectionBuilder_1n6od_1",ge="_header_1n6od_1",ye="_icon_1n6od_8",be="_title_1n6od_11",Ee="_body_1n6od_14",fe="_dragover_1n6od_17";const _e=G(d.url),ve=f((e=>{_e("render %o",e);const{className:t,children:r,treeNode:n}=e,{title:a}=n.props;return v.createElement(w,{draggableId:X({type:"Section",id:n.id,action:"drag"}),index:n.index},(e=>v.createElement("div",i({ref:e.innerRef,className:C(he,t)},e.draggableProps),v.createElement("div",i({className:ge},e.dragHandleProps),v.createElement("img",{className:ye,src:K}),v.createElement("div",{className:be},a)),v.createElement(P,{droppableId:X({type:"Section",id:n.id,action:"drop"}),type:"Term"},((e,t)=>v.createElement("div",i({ref:e.innerRef,className:C(Ee,{[fe]:t.isDraggingOver})},e.droppableProps),r,e.placeholder))))))}));var Ne={};const xe=G(d.url),Se=f((e=>{xe("render %o",e);const{className:t,treeNode:r,onRename:n,onDuplicate:a,onDelete:o}=e,l=r.props;return v.createElement(de,{icon:Y,treeNode:r,onRename:n,onDuplicate:a,onDelete:o},v.createElement("div",{className:C(Ne.shortAnswerBuilder,t)},v.createElement(N,null,v.createElement(N.Item,{label:"Text field label",required:!0},v.createElement(x,{defaultValue:l.label,onBlur:e=>l.label=e.target.value})))))}));var ke={termBuilder:"_termBuilder_1jrji_1",dropable:"_dropable_1jrji_6",header:"_header_1jrji_9",body:"_body_1jrji_18",dragover:"_dragover_1jrji_21",empty:"_empty_1jrji_25"};const Ie=G(d.url),we=f((e=>{Ie("render %o",e);const{className:t,children:r,treeNode:n,onRename:a,onDuplicate:o,onDelete:l}=e,{title:s}=n.props;return v.createElement(w,{draggableId:X({type:"Term",id:n.id,action:"drag",parentId:n.parent.id}),index:n.index},(e=>v.createElement("div",i({ref:e.innerRef,className:C(ke.termBuilder,t)},e.draggableProps),v.createElement("div",i({className:ke.header},e.dragHandleProps),v.createElement("span",{className:ke.title},s),v.createElement(T,{placement:"bottomRight",trigger:["click"],overlay:v.createElement(D,null,v.createElement(D.Item,{key:"title",disabled:!0},"TERM MENU"),v.createElement(D.Item,{key:"rename",onClick:a},"Rename"),v.createElement(D.Item,{key:"duplicate",onClick:o},"Duplicate"),v.createElement(D.Item,{key:"delete",danger:!0,onClick:l},"Delete"))},v.createElement(k,{size:"small",icon:v.createElement(O,null)}))),v.createElement(P,{droppableId:X({type:"Term",id:n.id,action:"drop",parentId:n.parent.id}),type:"Component"},((e,t)=>v.createElement("div",i({ref:e.innerRef,className:C(ke.body,{[ke.dragover]:t.isDraggingOver})},e.droppableProps),j(r)?v.createElement(w,{isDragDisabled:!0,draggableId:X({type:"Term",id:n.id,action:"drop",parentId:n.parent.id,placeholder:!0}),index:n.index},(e=>v.createElement("div",i(i({ref:e.innerRef,className:ke.empty},e.draggableProps),e.dragHandleProps),v.createElement(R,{dashed:!0,plain:!0},v.createElement(q.Text,{type:"secondary"},"Drag and drop a component into the term"))))):r,e.placeholder))))))}));var Ce="_builder_uywnh_1",Be="_dragover_uywnh_4";const Te=G(d.url),De={ContainerBuilder:de,SectionBuilder:ve,TermBuilder:we,ShortAnswerBuilder:Se,LongAnswerBuilder:ue},Oe=e=>{const{component:t,children:r}=e,n=De[`${t}Builder`],a=()=>r.map((e=>Oe(e)));if(!n)return a();return m.exports.createElement(n,{key:e.id,treeNode:e,onDuplicate:()=>{e.duplicate()},onDelete:()=>{_.confirm({title:"You’re about to delete a component",content:"Are you sure you want to delete this component? Any saved configurations and content for this term will also be deleted as well.",centered:!0,closable:!0,maskClosable:!0,okText:"Delete",okButtonProps:{danger:!0},onOk:()=>{e.remove()}})}},a())},Pe=f((e=>{Te("render %o",e);const{className:t,treeNode:r}=e;return v.createElement(P,{droppableId:X({id:"/",type:"Builder",action:"drop"}),type:"Section"},((e,n)=>v.createElement("div",s(i({ref:e.innerRef},e.droppableProps),{className:C(Ce,{[Be]:n.isDraggingOver},t)}),Oe(r),e.placeholder)))}));var je={root:"_root_1pui5_1",icon:"_icon_1pui5_11"};const Re=e=>{const{className:t,children:r,item:n}=e;return v.createElement("div",{className:C(je.root,t)},v.createElement("div",{className:je.icon},"string"==typeof n.icon?v.createElement("img",{src:n.icon}):n.icon),v.createElement("div",{className:je.name},n.name),r)},qe=Object.entries(W).filter((([e,t])=>t.dragable)).map((([e,t])=>i({key:e},t))),Ae=()=>v.createElement("div",null,qe.map(((e,t)=>v.createElement(P,{key:e.key,droppableId:X({id:e.key,type:"Library",action:"drop"}),type:["Section","Term"].includes(e.key)?e.key:"Component"},(r=>v.createElement("div",{ref:r.innerRef},v.createElement(w,{draggableId:X({id:e.key,type:"Library",action:"drag"}),index:t},(t=>v.createElement("div",i(i({ref:t.innerRef},t.draggableProps),t.dragHandleProps),v.createElement(Re,{item:e})))),r.placeholder))))));var Le="_section_tgzbz_1",ze="_header_tgzbz_1",Me="_icon_tgzbz_8",He="_title_tgzbz_11",Fe="_body_tgzbz_14";const Je=G(d.url);A((e=>{Je("Section render",e);const{className:t,children:r,title:n}=e;return v.createElement("div",{className:C(Le,t)},v.createElement("div",{className:ze},v.createElement("img",{className:Me,src:K}),v.createElement("span",{className:He},n)),v.createElement("div",{className:Fe},r))}));var Ue={term:"_term_14pia_1",header:"_header_14pia_6",body:"_body_14pia_14"};const Ve=G(d.url);A((e=>{Ve("Term render",e);const{className:t,children:r,title:n}=e;return v.createElement("div",{className:C(Ue.term,t)},v.createElement("div",{className:Ue.header},v.createElement("span",{className:Ue.title},n)),v.createElement("div",{className:Ue.body},r))})),L({validateFirst:!0});const Ke={version:"1",type:"object",properties:{aaaaaa:{type:"void","x-component":"Section","x-component-props":{title:"A. Structural Improvements"},properties:{aaa001:{type:"void","x-component":"Term","x-component-props":{title:"I. Term"}},aaa002:{type:"void","x-component":"Term","x-component-props":{title:"II. Term"}}}},bbbbbb:{type:"void","x-component":"Section","x-component-props":{title:"B. Roof"}},cccccc:{type:"void","x-component":"Section","x-component-props":{title:"C. Appliances"}}}};var Ye="_app_7bstd_1",$e="_header_7bstd_5",Qe="_fields_7bstd_12",We="_tabs_7bstd_16",Ge="_outline_7bstd_30",Xe="_library_7bstd_31";const Ze=G(null==d?void 0:d.url),et={contextmenu:!1,readOnly:!0,scrollBeyondLastLine:!1,minimap:{enabled:!1}},tt=f((()=>{const[e,t]=m.exports.useState("1"),r=window.store=m.exports.useMemo((()=>{var e;try{const t=null!=(e=JSON.parse(sessionStorage.getItem("forme-schema")))?e:Ke;return new le(t)}catch{return new le(Ke)}}),[]),n=m.exports.useCallback((e=>{var t;if(Ze("onDragEnd",e),"DROP"!==e.reason||!e.draggableId||!e.destination)return;const n=Z(e.draggableId),a=Z(e.destination.droppableId);if("Library"===n.type)if("Section"===n.id&&"Builder"===a.type)r.insertNewComponent(e.destination.index,n.id,r.treeNode);else if("Term"===n.id&&"Section"===a.type)r.insertNewComponent(e.destination.index,n.id,r.treeNode.findById(a.id));else if("Term"===a.type){const o=null==(t=r.treeNode.findById(a.parentId))?void 0:t.findById(a.id);r.insertNewComponent(e.destination.index,n.id,o)}}),[r]);return m.exports.useEffect((()=>z((()=>{try{sessionStorage.setItem("forme-schema",JSON.stringify(r.treeNode.toSchema()))}catch{}}))),[r]),v.createElement(M,{onDragEnd:n},v.createElement(H,{className:Ye},v.createElement(H.Header,{className:$e},v.createElement("h1",null,"Form Builder"),v.createElement(D,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["builder"],onSelect:e=>location.href=`/forme/${e.key}.html`},v.createElement(D.Item,{key:"builder"},"Builder"),v.createElement(D.Item,{key:"formily"},"Formily"))),v.createElement(H,null,v.createElement(H.Sider,{className:Ge,width:240},v.createElement("h2",null,"Form Outline")),v.createElement(H.Content,{className:Qe},v.createElement(F,{className:We,type:"card",activeKey:e,onTabClick:t},v.createElement(F.TabPane,{tab:"Design",key:"1",style:{overflowY:"scroll"}},v.createElement(Pe,{treeNode:r.treeNode})),v.createElement(F.TabPane,{tab:"Schema",key:"2"},v.createElement(J,{language:"json",value:JSON.stringify(r.treeNode.toSchema(),null,2),options:et})))),v.createElement(H.Sider,{className:Xe,width:240},v.createElement("h2",null,"Component Library"),v.createElement(Ae,null)))))}));U.render(v.createElement(tt,null),document.getElementById("root"));
